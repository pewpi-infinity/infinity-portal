<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Infinity Launcher · All-in-One Portal</title>
  <meta name="color-scheme" content="light dark"/>
  <style>
    :root {
      --blue-1: #003087;
      --blue-2: #0b5fd7;
      --bg: #fff;
      --panel: #f8fafc;
      --muted: #637083;
      --radius: 12px;
      font-family: system-ui, "Segoe UI", Roboto, Arial, sans-serif;
    }
    html, body { margin:0; padding:0; background:var(--bg); color:#051426; min-height:100vh;}
    .app { max-width:480px; margin:0 auto; padding:0 0 60px 0; }
    header { display:flex;align-items:center;justify-content:space-between;padding:14px 10px;background:#fff;border-bottom:1.5px solid #e6e9ef; }
    .logoText { font-weight:700; color:var(--blue-1); font-size:20px; letter-spacing:1px; }
    .sub { font-size:13px; color:var(--muted);}
    .nav { display:flex; gap:17px; }
    .nav a { color:var(--blue-2); font-weight:600; text-decoration:none; font-size:17px; padding:7px 0;}
    .nav a.active, .nav a:hover { border-bottom:2.5px solid var(--blue-2);}
    main { padding:20px 0 10px 0;}
    .card { background:var(--panel);border-radius:14px;padding:20px;margin-bottom:18px;box-shadow:0 2px 12px #00308716; }
    .card h2 { margin:0 0 8px 0; color:var(--blue-1);}
    .apps { display:flex; flex-direction:column; gap:18px; }
    .app-link { background:#fff; border-radius:10px; box-shadow:0 2px 12px #00308711; padding:16px; display:flex; flex-direction:column; align-items:flex-start;}
    .app-link a { color:var(--blue-2); font-weight:700; font-size:17px; text-decoration:none; }
    .desc { font-size:13px; color:var(--muted);margin-top:4px;}
    .live { color:#22c55e; font-weight:700; font-size:12px;}
    .panel { display:none; position:fixed; left:0; top:0; width:100vw; height:100vh; z-index:1000; background:rgba(2,6,23,0.33);}
    .panel .content { background:#fff; border-radius:14px; max-width:410px; margin:60px auto; padding:20px; box-shadow:0 12px 40px #00308726;}
    .panel .close { position:absolute; right:18px; top:22px; background:none; border:0; font-size:22px; color:var(--muted); cursor:pointer;}
    .rogersDock { position:fixed; right:16px; bottom:16px; z-index:999; }
    .rogBtn { width:56px; height:56px; border-radius:50%; background:linear-gradient(135deg, var(--blue-1), var(--blue-2)); display:flex;align-items:center;justify-content:center; color:#fff;font-weight:900; font-size:28px; box-shadow:0 10px 30px #0b5fd71a; cursor:pointer; border:none;}
    .rogBtn img { width:100%; height:100%; object-fit:cover; border-radius:50%; display:block; }
    .chatBox { position:fixed; right:10px; bottom:80px; width:95vw; max-width:340px; border-radius:12px; background:#fff; box-shadow:0 20px 50px #03183e29; display:none; flex-direction:column; z-index:999; overflow:hidden; border:1px solid #e6e9ef;}
    .chatBox.open { display:flex; }
    .chatHeader { padding:10px 14px; background:linear-gradient(90deg, var(--blue-1), var(--blue-2)); color:#fff; display:flex; justify-content:space-between;align-items:center; font-weight:bold;}
    .chatBody { padding:12px;height:210px;overflow-y:auto;background:var(--panel);font-size:15px;}
    .chatInput { display:flex; padding:10px; border-top:1px solid #e6e9ef; background:#f9fbfd;}
    .chatInput input { flex:1;padding:8px;border-radius:8px;border:1px solid #e6e9ef;font-size:16px;}
    .chatInput button { background:var(--blue-1); color:#fff; border:none; border-radius:8px; font-weight:700; padding:8px 14px; margin-left:7px; font-size:16px;}
    .bubble { margin:7px 0; max-width:90%; padding:9px 13px; border-radius:13px; word-break:break-word;}
    .me { background:rgba(11,95,215,0.08); border:1px solid rgba(11,95,215,0.11);margin-left:auto;}
    .ai { background:#fff; border:1px solid #e6e9ef;}
    .sidebarBtn { position:fixed;left:12px;top: 64px;width:48px;height:48px;border-radius:12px;background:#fff;border:1px solid #e6e9ef;display:flex;align-items:center;justify-content:center;font-size:26px;color:var(--blue-2);z-index:1001;cursor:pointer;}
    .sidebar { position:fixed;left:0;top:0;bottom:0;width:86vw;max-width:320px;background:#fff;box-shadow:20px 0 60px #03183e19;transform:translateX(-110%);transition:transform .28s;z-index:9999;padding:22px 12px 0 12px;overflow:auto;}
    .sidebar.open { transform:translateX(0);}
    .sidebar h3 { margin-top:0;}
    .sbLink { display:block;padding:10px 0;font-weight:700;color:var(--blue-1);text-decoration:none;border-bottom:1px solid #eee;}
    .devBox { background:#f8fafc;border-radius:10px;padding:12px;margin-top:14px;}
    @media (max-width:600px) {
      .app { max-width:100vw; }
      .chatBox { left:4px; right:4px;width:auto;}
      .panel .content {width:97vw;max-width:97vw;}
      .sidebar { width:98vw;max-width:98vw;}
    }
    /* Live Video/Widget styles included as above */
    .liveFab { position: fixed; right: 16px; bottom: 16px; z-index: 9999; }
    .liveFab button { height: 52px; min-width: 52px; padding: 0 16px; border-radius: 999px; border: none; cursor: pointer;
      background: linear-gradient(135deg, var(--blue-1), var(--blue-2)); color: #fff; font-weight: 800; box-shadow: 0 10px 30px #0b5fd726; }
    .livePanel { position: fixed; right: 16px; bottom: 84px; width: min(92vw, 420px); background: #0b1220; color: #e9eefc; border: 1px solid #0f274b; border-radius: 16px; box-shadow: 0 20px 60px #00000066; overflow: hidden; display: none; z-index: 9999;}
    .livePanel.open { display: block; }
    .liveHeader { display:flex; align-items:center; justify-content:space-between; padding: 10px 12px; background: #071127; }
    .liveHeader h4 { margin: 0; font-size: 14px; letter-spacing: .4px; }
    .liveTabs { display:flex; gap:8px; }
    .liveTabs button { background: transparent; color: #a9c2ff; border: 1px solid #0f274b; padding: 6px 10px; border-radius: 10px; cursor:pointer;}
    .liveTabs button.active { background: #123; color: #fff; border-color: #1b4aa8; }
    .liveBody { padding: 10px 12px 14px; }
    .liveBody .row { margin-bottom: 10px; }
    .liveSmall { font-size: 12px; opacity: .8; }
    .liveInput { width: 100%; padding: 10px 12px; border-radius: 10px; border:1px solid #112a55; background:#0b1733; color:#e9eefc;}
    .liveBtn { background:#1a4dd9; color:#fff; border:none; border-radius:10px; padding:10px 12px; cursor:pointer; font-weight:700;}
    .liveBtn.secondary { background:#0e2a63; }
    .liveMeta { display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-top:8px; }
    .liveMeta select, .liveMeta button { background:#0b1733; color:#e9eefc; border:1px solid #112a55; border-radius:10px; padding:6px 10px; }
    .liveVideoShell { position: relative; background:#000; border-radius: 12px; overflow:hidden; }
    .liveVideoShell video { width:100%; height:auto; display:block; }
    .liveBadge { position:absolute; left:10px; top:10px; background:#e10; color:#fff; font-size:10px; padding:4px 8px; border-radius:8px; letter-spacing:.7px; }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <span class="logoText">INFINITY</span>
      <nav class="nav">
        <a href="#" class="active" onclick="showPanel('main')">Home</a>
        <a href="#" onclick="showPanel('dev')">Dev Tools</a>
      </nav>
    </header>
    <main id="mainPanel">
      <div class="card">
        <h2>Infinity All-in-One Launcher</h2>
        <div class="sub" style="margin-bottom:13px;">All your tools, AI, and projects—one page, mobile ready.</div>
        <div class="apps">
          <div class="app-link">
            <a href="http://127.0.0.1:8080" target="_blank">Portal UI</a>
            <div class="desc">Day-to-day dashboard, navigation, tools</div>
            <span class="live">LIVE on :8080</span>
          </div>
          <div class="app-link">
            <a href="http://127.0.0.1:5050" target="_blank">Rogers AI Chat</a>
            <div class="desc">Conversational AI, dev chat, steering wheel</div>
            <span class="live">LIVE on :5050</span>
          </div>
          <div class="app-link">
            <a href="http://127.0.0.1:8000" target="_blank">Socializer (Demo)</a>
            <div class="desc">Community chat, channels, games (edit URL as needed)</div>
            <span class="live">:8000 (if running)</span>
          </div>
          <div class="app-link">
            <a href="pi_singer.html" target="_blank">Pi Singer</a>
            <div class="desc">Digit-to-music generator (your code, local HTML file)</div>
          </div>
        </div>
      </div>
      <div class="card">
        <h2>Quick Actions & Resources</h2>
        <ul style="margin-left:18px;">
          <li>Sidebar: Access all settings, dev tools, saved sessions</li>
          <li>Floating Rogers AI: Chat anytime <b>R</b></li>
          <li>Visit each app, then bookmark for fast access</li>
        </ul>
      </div>
    </main>
    <!-- Dev Tools Panel -->
    <div class="panel" id="devPanel" onclick="closePanel(event)">
      <div class="content" onclick="event.stopPropagation()">
        <button class="close" onclick="hidePanel('dev')">✕</button>
        <h2>Developer & Steering Wheel</h2>
        <div class="devBox">
          <b>Session Storage:</b> <span id="sessCount"></span>
          <button onclick="clearSessions()" style="margin-left:8px;">Clear Sessions</button>
        </div>
        <div class="devBox">
          <b>API/Endpoint Config:</b><br>
          <input id="apiInput" style="width:97%;padding:9px;border-radius:7px;border:1.2px solid #e6e9ef;" placeholder="Paste Rogers/Infinity API URL here">
          <button onclick="saveApi()" style="margin-top:8px;">Save Endpoint</button>
          <div id="apiSaved" class="sub" style="margin-top:7px;"></div>
        </div>
        <div class="devBox">
          <b>Notes:</b>
          <ul style="font-size:13px;">
            <li>Your local Watson-style AI is wired in (no IBM key needed)</li>
            <li>Plug in endpoints for live AI, voice/video, or data</li>
            <li>All panel logic is in this file—edit & extend as you wish</li>
          </ul>
        </div>
      </div>
    </div>
    <!-- Sidebar -->
    <button class="sidebarBtn" onclick="toggleSidebar()">☰</button>
    <aside class="sidebar" id="sidebar">
      <h3>Infinity Menu</h3>
      <a class="sbLink" href="#" onclick="showPanel('main');toggleSidebar()">Home</a>
      <a class="sbLink" href="#" onclick="showPanel('dev');toggleSidebar()">Dev Tools</a>
      <a class="sbLink" href="http://127.0.0.1:8080" target="_blank">Portal UI</a>
      <a class="sbLink" href="http://127.0.0.1:5050" target="_blank">Rogers AI Chat</a>
      <a class="sbLink" href="http://127.0.0.1:8000" target="_blank">Socializer</a>
      <a class="sbLink" href="pi_singer.html" target="_blank">Pi Singer</a>
      <div style="margin-top:18px;font-size:13px;color:#6b7280;">Contact: infinitystockinvesting@gmail.com</div>
    </aside>

    <!-- Rogers AI Dock -->
    <div class="rogersDock">
      <button class="rogBtn" id="rogBtn" title="Rogers AI"><img src="einstein-avatar.png" alt="Rogers Einstein" onerror="this.remove(); this.closest('button').textContent='R';"></button>
    </div>
    <div class="chatBox" id="chatBox">
      <div class="chatHeader">
        <span>Rogers AI</span>
        <button onclick="toggleChat()" style="background:transparent;border:none;color:#fff;font-size:20px;cursor:pointer;">✕</button>
      </div>
      <div class="chatBody" id="chatBody"></div>
      <form class="chatInput" onsubmit="event.preventDefault();sendChat();">
        <input id="chatIn" autocomplete="off" placeholder="Ask Rogers anything...">
        <button type="submit">Send</button>
      </form>
    </div>
  </div>

<!-- =================== JS/Widget Logic =================== -->
<script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.8"></script>
<script src="https://cdn.jsdelivr.net/npm/dashjs@4.7.4/dist/dash.all.min.js"></script>
<script>
/* Panel/Sidebar Logic */
function showPanel(name){
  document.getElementById('mainPanel').style.display = (name==='main')?'block':'none';
  document.getElementById('devPanel').style.display = (name==='dev')?'flex':'none';
}
function hidePanel(name){ document.getElementById('devPanel').style.display='none'; }
function closePanel(event){ if(event.target.classList.contains('panel')) hidePanel('dev'); }
function toggleSidebar(){ document.getElementById('sidebar').classList.toggle('open'); }

/* Session/Dev logic */
function clearSessions(){
  localStorage.clear();
  document.getElementById('sessCount').innerText = '0';
}
function saveApi(){
  const val = document.getElementById('apiInput').value.trim();
  if(!val){ document.getElementById('apiSaved').innerText = 'Enter a URL first'; return; }
  localStorage.setItem('INFINITY_API', val);
  document.getElementById('apiSaved').innerText = 'Saved API endpoint!';
  setTimeout(()=>document.getElementById('apiSaved').innerText='',1800);
}
function updateSessCount(){
  let count = Object.keys(localStorage).length;
  document.getElementById('sessCount').innerText = count;
}
updateSessCount();

/* Rogers Chat Dock Logic */
const rogBtn = document.getElementById('rogBtn');
const chatBox = document.getElementById('chatBox');
rogBtn.onclick = () => { chatBox.classList.add('open'); setTimeout(()=>document.getElementById('chatIn').focus(), 120); }
function toggleChat() { chatBox.classList.remove('open'); }
const chatBody = document.getElementById('chatBody');
const chatIn = document.getElementById('chatIn');
function addBubble(role, text) {
  const div = document.createElement('div');
  div.className = 'bubble ' + (role === 'me' ? 'me' : 'ai');
  div.textContent = text;
  chatBody.appendChild(div);
  chatBody.scrollTop = chatBody.scrollHeight;
}
function sendChat() {
  const t = chatIn.value.trim();
  if (!t) return;
  addBubble('me', t);
  chatIn.value = '';
  setTimeout(() => {
    // Demo “Watson” reply (replace with real API if you want)
    let reply = '';
    if (/help|how/i.test(t)) reply = "I'm Rogers, your Infinity assistant. How can I help?";
    else if (/energy|token/i.test(t)) reply = "Energy features are in development. Check your profile soon!";
    else if (/voice|audio/i.test(t)) reply = "Voice features are coming! Try the mic in your next update.";
    else if (/weather|news/i.test(t)) reply = "Live data will be in the next Infinity release.";
    else reply = "Got it! (This is a demo. For live AI, connect the backend API.)";
    addBubble('ai', reply);
  }, 400);
}
addBubble('ai', "Hi! Rogers AI is ready. Ask anything or say 'help'.");

/* === Live Video Widget === */
(function(){
  const LIVE_CONFIG = {
    hls: "https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8",
    mp4: "https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
    dash: ""
  };
  // UI binds
  const fab = document.createElement('div');
  fab.className = 'liveFab';
  fab.innerHTML = `<button id="toggleLive">● Live</button>`;
  document.body.appendChild(fab);
  const livePanel = document.createElement('div');
  livePanel.className = 'livePanel'; livePanel.id = 'livePanel';
  livePanel.innerHTML = `
    <div class="liveHeader">
      <h4>Rogers Live — Watson × Gemini (planned)</h4>
      <div class="liveTabs">
        <button id="tabLive" class="active">Live</button>
        <button id="tabSignup">Sign up</button>
      </div>
    </div>
    <div class="liveBody">
      <div id="panelLive">
        <div class="liveVideoShell">
          <span class="liveBadge">LIVE</span>
          <video id="liveVideo" playsinline webkit-playsinline x-webkit-airplay="allow" controls></video>
        </div>
        <div class="liveMeta">
          <select id="qualitySelect" title="Quality"></select>
          <button id="pipBtn" title="Picture-in-Picture">PiP</button>
          <button id="fsBtn" title="Fullscreen">Fullscreen</button>
          <button id="latencyBtn" title="Ultra Low Latency">ULL</button>
        </div>
      </div>
      <div id="panelSignup" style="display:none">
        <div class="row"><input id="signupEmail" class="liveInput" type="email" placeholder="Email"></div>
        <div class="row"><input id="signupName" class="liveInput" type="text" placeholder="Display name (optional)"></div>
        <div class="row"><button id="signupBtn" class="liveBtn">Create account</button></div>
        <div class="row liveSmall">No passwords yet — this is a local quick-start. We’ll wire real auth later.</div>
        <div class="row liveSmall">Already set? You’re signed in as: <strong id="signedAs">—</strong></div>
      </div>
    </div>
  `;
  document.body.appendChild(livePanel);

  // Panel toggle
  document.getElementById('toggleLive').onclick = ()=> livePanel.classList.toggle('open');
  livePanel.querySelector('#tabLive').onclick = ()=>{ livePanel.querySelector('#tabLive').classList.add('active'); livePanel.querySelector('#tabSignup').classList.remove('active'); livePanel.querySelector('#panelLive').style.display=''; livePanel.querySelector('#panelSignup').style.display='none'; }
  livePanel.querySelector('#tabSignup').onclick = ()=>{ livePanel.querySelector('#tabSignup').classList.add('active'); livePanel.querySelector('#tabLive').classList.remove('active'); livePanel.querySelector('#panelSignup').style.display=''; livePanel.querySelector('#panelLive').style.display='none'; }
  // Sign up logic
  livePanel.querySelector('#signupBtn').onclick = ()=>{
    const email = livePanel.querySelector('#signupEmail').value.trim();
    const name = livePanel.querySelector('#signupName').value.trim();
    if (!email) return alert('Enter an email to continue.');
    const obj = { email, name, ts: Date.now() };
    localStorage.setItem('infinity_user', JSON.stringify(obj));
    livePanel.querySelector('#signedAs').textContent = name || email;
    alert('Account created locally. We’ll hook real auth next.');
  };
  // Video streaming
  const video = livePanel.querySelector('#liveVideo');
  const qSel = livePanel.querySelector('#qualitySelect');
  const pipBtn = livePanel.querySelector('#pipBtn');
  const fsBtn = livePanel.querySelector('#fsBtn');
  const latencyBtn = livePanel.querySelector('#latencyBtn');
  let hls = null, dash = null;
  function unloadPlayers(){
    if (hls) { try { hls.destroy(); } catch(e){} hls = null; }
    if (dash) { try { dash.reset(); } catch(e){} dash = null; }
    video.removeAttribute('src'); video.load();
  }
  function setupHls(url){
    unloadPlayers();
    if (window.Hls && Hls.isSupported()) {
      hls = new Hls({ enableWorker: true, lowLatencyMode: true, liveSyncDurationCount: 2 });
      hls.loadSource(url);
      hls.attachMedia(video);
      hls.on(Hls.Events.MANIFEST_PARSED, function() {
        buildQualityMenu(hls.levels);
      });
    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
      video.src = url;
      buildQualityMenu([]); // native iOS player handles quality
    } else {
      if (LIVE_CONFIG.mp4) setupMp4(LIVE_CONFIG.mp4);
    }
  }
  function setupMp4(url){
    unloadPlayers();
    video.src = url;
    buildQualityMenu([]);
  }
  function buildQualityMenu(levels){
    qSel.innerHTML = '';
    if (!levels || !levels.length || !hls) {
      const opt = document.createElement('option');
      opt.value = 'auto'; opt.textContent = 'Auto';
      qSel.appendChild(opt);
      qSel.disabled = true;
      return;
    }
    qSel.disabled = false;
    const auto = document.createElement('option');
    auto.value = 'auto'; auto.textContent = 'Auto';
    qSel.appendChild(auto);
    levels.forEach((lvl, i) => {
      const opt = document.createElement('option');
      const res = (lvl.height ? (lvl.height + 'p') : (Math.round((lvl.bitrate||0)/1000) + 'kbps'));
      opt.value = i; opt.textContent = res;
      qSel.appendChild(opt);
    });
    qSel.onchange = ()=>{ if (!hls) return; hls.currentLevel = (qSel.value === 'auto') ? -1 : parseInt(qSel.value, 10); };
  }
  pipBtn.onclick = async ()=>{ try { if (document.pictureInPictureElement) await document.exitPictureInPicture(); else if (video.requestPictureInPicture) await video.requestPictureInPicture(); } catch(e){} };
  fsBtn.onclick = async ()=>{ try { if (!document.fullscreenElement) await video.parentElement.requestFullscreen(); else await document.exitFullscreen(); } catch(e){} };
  latencyBtn.onclick = ()=>{ try { video.currentTime = video.buffered.end(0) - 0.25; } catch(e){} };
  // Auto-init
  if (LIVE_CONFIG.hls) setupHls(LIVE_CONFIG.hls);
  else if (LIVE_CONFIG.mp4) setupMp4(LIVE_CONFIG.mp4);
})();
</script>
</body>
</html>